const defaultOption={attributeMain:"[main-otp-rs]",classSub:"sub-otp-rs",autoSubmit:!1};class OTP{constructor(e,s={...defaultOption}){this.default={...defaultOption,...s},this.element=e,this.autoSubmit=this.default.autoSubmit,this.main=this.element.querySelector(this.default.attributeMain),this.subs=this.element.getElementsByClassName(this.default.classSub)}start=()=>{Array.from(this.subs).forEach(((e,s)=>{e.onpaste=async e=>{e.preventDefault();const s=(e.clipboardData||window.clipboardData).getData("text").replace(/[^\w\s]/gi,"").split("");s.length>0&&s.forEach(((e,s)=>{const t=this.subs[s];s<this.subs.length&&(t.value=e,s==this.subs.length-1&&t.focus())})),this.end()},e.onkeydown=async t=>{let i;if(t.ctrlKey&&86==t.keyCode)return!1;if(t.preventDefault(),(t.keyCode>47&&t.keyCode<58||t.keyCode>64&&t.keyCode<91)&&(e.value=event.key),8==t.keyCode&&""!=e.value)e.value="";else if(8==t.keyCode&&s>0)i=this.subs[s-1],i.value="",i.focus();else if(9==t.keyCode)i=s<=this.subs.length-2?this.subs[s+1]:this.subs[0],i.focus();else if([33,38,39].some((e=>e==t.keyCode)))s<=this.subs.length-2&&(i=this.subs[s+1],i.focus());else if([34,37,40].some((e=>e==t.keyCode)))s>0&&(i=this.subs[s-1],i.focus());else if(8!=t.keyCode&&s<this.subs.length-1&&(t.keyCode>47&&t.keyCode<58||t.keyCode>64&&t.keyCode<91)){let e=s+1;this.subs[e].focus()}this.end()}}))};end=()=>{this.main.value="",Array.from(this.subs).forEach(((e,s)=>{let t=e.value.trim();if(""!=t){const s=t.split("");e.value=1==t.length?t:s[0],t=e.value}this.main.value+=`${t}`})),this.autoSubmit&&this.main.length==this.subs.length&&this.submit()};submit=()=>{}}